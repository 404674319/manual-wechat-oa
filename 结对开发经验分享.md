# 结对编程经验分享
</br>
结对编程
--
结对编程技术是指两位程序员坐在同一工作台前开发软件。与两位程序员各自独立工作相比，结对编程能编写出质量更高的代码。

近期与开发部的同事进行了几次结对编程，在结对过程中不仅增加了我对系统平台业务的了解并且还与开发部的同事一起分析并解决掉遇到的问题。在结对编程的过程中发现了一些开发时经常容易犯下的错误。在这里分享一下结对编程的经验。

1.修改bug时原因调查不彻底
-- 
开发部的同事经常会遇到之前不是自己开发的代码，当对应的测试人员测试出bug后，首先会主动去猜测一下问题发生的原因，如果发现自己的猜测发现解决不了就会卡主或者寻求他人的帮助。

例如：有一个页面上显示的内容需要输出到Excel中，但是导出后发现其中本应该是多个数据项的内容只保留了一个数据项，所以担当就猜测是数据库查询的时候没有将多个数据项取出，也就是SQL查询时出的问题，由于查询SQL涉及到多个表关联并且比较复杂，就提出需要寻求帮助。但是经过协助调查后发现，SQL写的并没有问题，而是在向Excel中导出数据的时候出的问题。此类问题应该尽量避免。

解决方法：首先应该根据bug的现象定位到具体哪一段代码出现的问题，逐步一点一点深入调查，最后找到问题出现的原因，然后尝试解决，如果实在解决不了再寻求他人的帮助。

2.页面中定义的参数变量名与实际意义不符
--
作为页面的开发者，变量名应该尽量使用与实际意义相符的名称，否则很有可能给后续维护的人员带来不必要的麻烦，也就是俗话说的“坑”。

例如：A 表中的主键 id 在 B 表与 A 表关联时 B 表中的字段为 recordId 。然后在页面中，开发人员将这个字段的变量名取名为 recordId 并且将真正的 recordId 定义为 realRecordId 。这样的命名对于对业务不是非常了解的维护人员来说是很有误导性的，维护人员在用此字段进行表关联时就会出错。

解决方法：定义的参数变量名与实际意义相符。

3.代码冗余
--
功能差不多的方法写了多个实现类，而代码段都差不多。这样代码太过冗余，可读性差。

解决方法：将功能差不多的方法通过传入不同的参数进行区分处理。

4.尽量不要修改表结构
--
在结对编程中遇到一个问题，之前的时候是显示所有的数据，新的需求为显示所有被扣分的数据。而这样的数据需要从C表中查询。基本表A中并没有这样的字段，所以维护人员想通过添加字段并修改业务逻辑来实现这样的功能。如果这样做涉及的修改部分会很大，有可能造成不可预知的问题。

解决方法：通过中间表 B 表来进行关联， 既将 A 表与 B 表关联，然后再通过 B 表与 C 表的关联将扣分的数据查询出来从而解决问题。

5.代码优化
--
一些代码在通过DB查询数据时，将查询语句写在了 for 循环里。这样会造成查询数据库的很多额外的开销。

解决方法：在进行查询时一次把所有的数据都查询出来，将结果保存到结果集中，然后对结果集进行操作。避免不必要的DB查询开销。

6.修改的java代码没有生效
--
开发人员有时在修改java代码时，直接在tomcat运行时进行修改，然后刷新页面进行验证。这样做有时有效有时无效。造成这种现象的原因是缓存的存在。

解决方法：重新编译工程（project -> clean），编译好之后重新发布工程。

7.利用文档本身属性精简代码
--
在做导出Excel时，操作单元格的时候，有时需要写很多代码来设置Excel的单元格属性。

解决方法：在导出模板中，可以利用Excel自身的属性（Excel支持宏定义和VBA代码）。

8.缺少异常系的处理
--
在 try ... catch 中缺少对 catch 的异常处理

解决方法：至少应该将异常的原因记录到log中，以便于发现和解决问题。

9.缺少代码注释
--
在代码中很少能看见关于功能以及重要部分代码的注释，对于维护以及代码可读性来说不是一件好事。

解决方法：将重要的部分以及功能部分填写相应的注释，这样既提高代码的可读性也便于以后他人维护。

10.用字符串给多次使用的变量赋值
--
在代码中经常能看到对多次使用的变量使用字符串进行赋值，这样操作有一定的风险，例如，如果这个变量的值改变，则全文上下所有的值都需要手动修改。

解决方法：采用常量定义字符串，在使用的时候直接饮用常量，这样如果常量值改变也不需要全文搜索修改值。
